# 백엔드-프론트엔드 연동 확인 체크리스트

회원가입/로그인 성공 후에도 다음 사항들을 확인해야 합니다.

## ✅ 1단계: 기본 인증 확인

### 회원가입 테스트
- [ ] 회원가입 성공 메시지 표시
- [ ] 자동으로 홈 화면으로 이동
- [ ] 에러 없이 화면 전환

### 로그인 테스트
- [ ] 로그인 성공 메시지 표시
- [ ] 자동으로 홈 화면으로 이동
- [ ] 에러 없이 화면 전환

## ✅ 2단계: 데이터베이스 확인

### MariaDB에서 데이터 확인

```sql
-- 사용자 테이블 확인
SELECT * FROM users;

-- 최근 가입한 사용자 확인
SELECT id, email, name, school, department, grade, user_code, total_xp, streak 
FROM users 
ORDER BY created_at DESC 
LIMIT 5;
```

**확인 사항:**
- [ ] 사용자 데이터가 데이터베이스에 저장되었는지 확인
- [ ] `user_code`가 `CERT-0001` 형식으로 생성되었는지 확인
- [ ] `total_xp`와 `streak`이 0으로 초기화되었는지 확인

## ✅ 3단계: 앱 화면에서 확인

### 홈 화면 (HomeScreen)
로그인 후 홈 화면에서 확인:

- [ ] **사용자 이름 표시**: 상단에 가입한 이름이 표시되는지 확인
- [ ] **XP 표시**: 총 XP가 0으로 표시되는지 확인
- [ ] **스트릭 표시**: 연속 학습일이 표시되는지 확인
- [ ] **사용자 코드 표시**: `CERT-0001` 형식의 코드가 표시되는지 확인
- [ ] **에러 없음**: 콘솔에 에러 메시지가 없는지 확인

### 프로필 화면 (ProfileScreen)
프로필 화면에서 확인:

- [ ] **사용자 정보 표시**: 이름, 학교, 학과, 학년이 올바르게 표시되는지 확인
- [ ] **사용자 코드 표시**: 고유 코드가 표시되는지 확인
- [ ] **XP 및 스트릭 표시**: 정확한 값이 표시되는지 확인

## ✅ 4단계: 앱 재시작 테스트

### 자동 로그인 확인
1. 앱을 완전히 종료
2. 앱을 다시 실행
3. 확인 사항:
   - [ ] 자동으로 홈 화면으로 이동 (로그인 화면이 아닌지 확인)
   - [ ] 사용자 정보가 로드되어 표시되는지 확인
   - [ ] 토큰이 유효한지 확인

## ✅ 5단계: API 호출 확인

### 개발자 도구에서 확인

**React Native Debugger 또는 콘솔에서:**

1. **회원가입 시:**
   ```
   POST http://172.30.1.93:8080/api/auth/register
   응답: { success: true, data: { token: "...", user: {...} } }
   ```

2. **로그인 시:**
   ```
   POST http://172.30.1.93:8080/api/auth/login
   응답: { success: true, data: { token: "...", user: {...} } }
   ```

3. **사용자 정보 조회:**
   ```
   GET http://172.30.1.93:8080/api/users/me
   헤더: Authorization: Bearer {token}
   응답: { success: true, data: { id, email, name, ... } }
   ```

**확인 사항:**
- [ ] 모든 API 호출이 성공하는지 확인 (HTTP 200)
- [ ] JWT 토큰이 헤더에 포함되는지 확인
- [ ] 응답 형식이 올바른지 확인

## ✅ 6단계: 백엔드 로그 확인

백엔드 서버 콘솔에서 확인:

- [ ] **회원가입 시:**
  ```
  INSERT INTO users ...
  ```

- [ ] **로그인 시:**
  ```
  SELECT * FROM users WHERE email = ...
  ```

- [ ] **사용자 정보 조회 시:**
  ```
  SELECT * FROM users WHERE id = ...
  ```

- [ ] **에러 없음**: 에러 메시지가 없는지 확인

## ✅ 7단계: 추가 기능 테스트 (선택사항)

### 추천 자격증 조회
홈 화면에서:
- [ ] 추천 자격증 목록이 표시되는지 확인 (비어있어도 에러가 없어야 함)

### 친구 랭킹 조회
홈 화면에서:
- [ ] 친구 랭킹이 표시되는지 확인 (비어있어도 에러가 없어야 함)

## 🔍 문제 발생 시 확인 사항

### 회원가입/로그인은 성공했지만 화면에 데이터가 안 보이는 경우

1. **콘솔 에러 확인:**
   - React Native Debugger 또는 Metro Bundler 콘솔 확인
   - 네트워크 에러가 있는지 확인

2. **백엔드 응답 확인:**
   - 백엔드 서버 콘솔에서 응답 로그 확인
   - 응답 형식이 올바른지 확인

3. **토큰 저장 확인:**
   ```javascript
   // React Native Debugger에서 실행
   const AsyncStorage = require('@react-native-async-storage/async-storage');
   AsyncStorage.getItem('authToken').then(console.log);
   ```

4. **사용자 정보 확인:**
   ```javascript
   // React Native Debugger에서 실행
   const AsyncStorage = require('@react-native-async-storage/async-storage');
   AsyncStorage.getItem('userId').then(console.log);
   ```

### 데이터베이스에 저장되지 않는 경우

1. **백엔드 로그 확인:**
   - INSERT 쿼리가 실행되는지 확인
   - 트랜잭션 롤백이 발생하는지 확인

2. **데이터베이스 연결 확인:**
   - MariaDB가 실행 중인지 확인
   - 연결 정보가 올바른지 확인

## 📝 체크리스트 요약

**최소 확인 사항:**
1. ✅ 회원가입/로그인 성공
2. ✅ 데이터베이스에 데이터 저장 확인
3. ✅ 홈 화면에 사용자 정보 표시 확인
4. ✅ 앱 재시작 후 자동 로그인 확인

**이 4가지만 확인해도 기본 연동은 완료된 것입니다!**

나머지는 추가 기능이므로 나중에 테스트해도 됩니다.

---

**문제가 발생하면:**
1. 백엔드 서버 로그 확인
2. 프론트엔드 콘솔 확인
3. 네트워크 요청/응답 확인
4. 데이터베이스 직접 확인

